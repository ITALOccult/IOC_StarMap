/**
 * @file ConstellationData.cpp
 * @brief Dati delle costellazioni: figure e confini IAU
 * 
 * Coordinate J2000.0 accurate da SIMBAD/Hipparcos
 * Confini da IAU Constellation Boundaries (Delporte 1930)
 */

#include "starmap/map/ConstellationData.h"
#include <map>
#include <vector>
#include <string>

namespace starmap {
namespace map {

// ============================================================================
// FIGURE DELLE COSTELLAZIONI (asterismi tradizionali)
// Coordinate J2000.0 in gradi (RA, Dec)
// ============================================================================

const std::map<std::string, ConstellationData> ALL_CONSTELLATIONS = {
    // ========== COSTELLAZIONI INVERNALI (emisfero nord) ==========
    {"Orion", {
        "Orion", "Ori", 85.0, 0.0,
        {
            {88.7929, 7.4070, 81.2828, 6.3497},   // Betelgeuse - Bellatrix
            {88.7929, 7.4070, 83.7845, 9.9340},   // Betelgeuse - Meissa
            {81.2828, 6.3497, 83.7845, 9.9340},   // Bellatrix - Meissa
            {83.0015, -0.2991, 84.0533, -1.2019}, // Mintaka - Alnilam
            {84.0533, -1.2019, 85.1897, -1.9426}, // Alnilam - Alnitak
            {88.7929, 7.4070, 85.1897, -1.9426},  // Betelgeuse - Alnitak
            {81.2828, 6.3497, 83.0015, -0.2991},  // Bellatrix - Mintaka
            {85.1897, -1.9426, 86.9391, -9.6696}, // Alnitak - Saiph
            {83.0015, -0.2991, 78.6345, -8.2016}, // Mintaka - Rigel
            {78.6345, -8.2016, 86.9391, -9.6696}, // Rigel - Saiph
        },
        {
            {"Betelgeuse", {88.7929, 7.4070}},
            {"Rigel", {78.6345, -8.2016}},
            {"Bellatrix", {81.2828, 6.3497}},
            {"Mintaka", {83.0015, -0.2991}},
            {"Alnilam", {84.0533, -1.2019}},
            {"Alnitak", {85.1897, -1.9426}},
            {"Saiph", {86.9391, -9.6696}},
            {"Meissa", {83.7845, 9.9340}},
        }
    }},
    {"Taurus", {
        "Taurus", "Tau", 65.0, 18.0,
        {
            {68.9801, 16.5093, 67.1657, 15.8708}, // Aldebaran - θ² Tau
            {67.1657, 15.8708, 64.9484, 15.6274}, // θ² Tau - γ Tau
            {64.9484, 15.6274, 65.7335, 17.5425}, // γ Tau - δ¹ Tau
            {65.7335, 17.5425, 67.1543, 19.1802}, // δ¹ Tau - ε Tau
            {68.9801, 16.5093, 67.1543, 19.1802}, // Aldebaran - ε Tau
            {84.4112, 21.1425, 68.9801, 16.5093}, // ζ Tau - Aldebaran
            {81.5729, 28.6075, 84.4112, 21.1425}, // Elnath - ζ Tau
        },
        {
            {"Aldebaran", {68.9801, 16.5093}},
            {"Elnath", {81.5729, 28.6075}},
            {"Ain", {67.1543, 19.1802}},
            {"Hyadum I", {64.9484, 15.6274}},
        }
    }},
    {"Gemini", {
        "Gemini", "Gem", 100.0, 25.0,
        {
            {113.6495, 31.8883, 116.3289, 28.0262}, // Castor - Pollux
            {116.3289, 28.0262, 116.1115, 24.3979}, // Pollux - κ Gem
            {116.1115, 24.3979, 110.0308, 21.9822}, // κ Gem - Wasat
            {110.0308, 21.9822, 106.0272, 20.5703}, // Wasat - Mekbuda
            {106.0272, 20.5703, 99.4279, 16.3993},  // Mekbuda - Alhena
            {113.6495, 31.8883, 107.7851, 30.2451}, // Castor - τ Gem
            {107.7851, 30.2451, 102.3226, 27.7980}, // τ Gem - ι Gem
            {102.3226, 27.7980, 95.7400, 22.5135},  // ι Gem - Tejat
            {95.7400, 22.5135, 93.7193, 22.5068},   // Tejat - Propus
        },
        {
            {"Pollux", {116.3289, 28.0262}},
            {"Castor", {113.6495, 31.8883}},
            {"Alhena", {99.4279, 16.3993}},
            {"Tejat", {95.7400, 22.5135}},
            {"Mebsuta", {100.9833, 25.1311}},
        }
    }},
    {"Canis Major", {
        "Canis Major", "CMa", 101.0, -22.0,
        {
            {101.2872, -16.7161, 95.6749, -17.9559},  // Sirius - Mirzam
            {101.2872, -16.7161, 107.0976, -26.3932}, // Sirius - Adhara
            {107.0976, -26.3932, 109.2856, -26.3939}, // Adhara - Wezen
            {109.2856, -26.3939, 111.0237, -27.9345}, // Wezen - Aludra
            {101.2872, -16.7161, 103.5330, -19.2558}, // Sirius - ν² CMa
            {103.5330, -19.2558, 109.2856, -26.3939}, // ν² CMa - Wezen
        },
        {
            {"Sirius", {101.2872, -16.7161}},
            {"Adhara", {107.0976, -26.3932}},
            {"Wezen", {109.2856, -26.3939}},
            {"Mirzam", {95.6749, -17.9559}},
            {"Aludra", {111.0237, -29.3031}},
        }
    }},
    {"Canis Minor", {
        "Canis Minor", "CMi", 114.0, 6.0,
        {
            {114.8255, 5.2250, 111.7875, 8.2894},  // Procyon - Gomeisa
        },
        {
            {"Procyon", {114.8255, 5.2250}},
            {"Gomeisa", {111.7875, 8.2894}},
        }
    }},
    {"Monoceros", {
        "Monoceros", "Mon", 105.0, 0.0,
        {
            {99.1708, -4.2392, 107.9667, -0.4928},  // α Mon - δ Mon
            {107.9667, -0.4928, 115.3125, -9.5511}, // δ Mon - β Mon
            {99.1708, -4.2392, 95.9833, -6.9739},   // α Mon - γ Mon
        },
        {
            {"α Mon", {99.1708, -4.2392}},
        }
    }},
    {"Lepus", {
        "Lepus", "Lep", 80.0, -18.0,
        {
            {83.1833, -17.8222, 79.4021, -14.1678}, // Arneb - Nihal
            {79.4021, -14.1678, 76.3646, -11.8689}, // Nihal - ε Lep
            {83.1833, -17.8222, 86.1167, -20.7592}, // Arneb - μ Lep
            {86.1167, -20.7592, 87.4604, -22.4481}, // μ Lep - ε Lep (sud)
        },
        {
            {"Arneb", {83.1833, -17.8222}},
            {"Nihal", {79.4021, -14.1678}},
        }
    }},
    {"Eridanus", {
        "Eridanus", "Eri", 55.0, -30.0,
        {
            {76.9625, -5.0864, 69.5458, -3.2525},   // Cursa - ν Eri
            {69.5458, -3.2525, 62.9667, -5.4528},   // ν Eri - τ¹ Eri
            {62.9667, -5.4528, 56.2042, -7.6522},   // τ¹ Eri - τ³ Eri
            {56.2042, -7.6522, 44.5667, -8.8981},   // τ³ Eri - τ⁴ Eri
            {44.5667, -8.8981, 40.1708, -13.5086},  // τ⁴ Eri - τ⁵ Eri
            {40.1708, -13.5086, 26.0208, -15.9397}, // τ⁵ Eri - τ⁶ Eri
            {26.0208, -15.9397, 24.4292, -57.2367}, // τ⁶ Eri - Achernar
        },
        {
            {"Achernar", {24.4292, -57.2367}},
            {"Cursa", {76.9625, -5.0864}},
        }
    }},
    
    // ========== COSTELLAZIONI PRIMAVERILI ==========
    {"Leo", {
        "Leo", "Leo", 154.0, 20.0,
        {
            {152.0930, 11.9672, 151.8333, 16.7626}, // Regulus - η Leo
            {151.8333, 16.7626, 154.9930, 19.8416}, // η Leo - Algieba
            {154.9930, 19.8416, 154.1725, 23.4174}, // Algieba - Adhafera
            {154.1725, 23.4174, 148.1908, 26.0068}, // Adhafera - Rasalas
            {148.1908, 26.0068, 146.4622, 23.7743}, // Rasalas - ε Leo
            {146.4622, 23.7743, 151.8333, 16.7626}, // ε Leo - η Leo
            {154.9930, 19.8416, 168.5270, 20.5238}, // Algieba - Zosma
            {168.5270, 20.5238, 168.5600, 15.4297}, // Zosma - Chertan
            {168.5270, 20.5238, 177.2649, 14.5720}, // Zosma - Denebola
            {168.5600, 15.4297, 177.2649, 14.5720}, // Chertan - Denebola
            {152.0930, 11.9672, 168.5600, 15.4297}, // Regulus - Chertan
        },
        {
            {"Regulus", {152.0930, 11.9672}},
            {"Denebola", {177.2649, 14.5720}},
            {"Algieba", {154.9930, 19.8416}},
            {"Zosma", {168.5270, 20.5238}},
            {"Chertan", {168.5600, 15.4297}},
            {"Adhafera", {154.1725, 23.4174}},
            {"Rasalas", {148.1908, 26.0068}},
        }
    }},
    {"Virgo", {
        "Virgo", "Vir", 195.0, -5.0,
        {
            {201.2983, -11.1614, 193.9008, 3.3975},  // Spica - Porrima
            {193.9008, 3.3975, 190.4150, 1.5447},    // Porrima - δ Vir
            {190.4150, 1.5447, 184.9763, -0.6658},   // δ Vir - ε Vir (Vindemiatrix)
            {193.9008, 3.3975, 197.4892, 10.9592},   // Porrima - η Vir
            {197.4892, 10.9592, 213.2242, 10.9589},  // η Vir - β Vir
            {201.2983, -11.1614, 209.5679, -5.5392}, // Spica - ζ Vir
        },
        {
            {"Spica", {201.2983, -11.1614}},
            {"Porrima", {193.9008, 3.3975}},
            {"Vindemiatrix", {184.9763, -0.6658}},
        }
    }},
    {"Bootes", {
        "Boötes", "Boo", 218.0, 35.0,
        {
            {213.9154, 19.1825, 218.0192, 38.3083}, // Arcturus - ε Boo
            {218.0192, 38.3083, 221.2467, 27.0742}, // ε Boo - η Boo
            {221.2467, 27.0742, 213.9154, 19.1825}, // η Boo - Arcturus
            {213.9154, 19.1825, 208.6713, 18.3978}, // Arcturus - ζ Boo
            {218.0192, 38.3083, 225.4863, 40.3906}, // ε Boo - δ Boo
            {225.4863, 40.3906, 233.6721, 33.3150}, // δ Boo - β Boo (Nekkar)
        },
        {
            {"Arcturus", {213.9154, 19.1825}},
            {"Nekkar", {233.6721, 33.3150}},
            {"Izar", {221.2467, 27.0742}},
        }
    }},
    {"Corona Borealis", {
        "Corona Borealis", "CrB", 233.0, 30.0,
        {
            {233.6721, 26.7147, 231.9571, 29.1057}, // Alphecca - θ CrB
            {231.9571, 29.1057, 230.1708, 31.3592}, // θ CrB - β CrB
            {233.6721, 26.7147, 235.6854, 26.2956}, // Alphecca - γ CrB
            {235.6854, 26.2956, 237.3979, 29.8511}, // γ CrB - δ CrB
            {237.3979, 29.8511, 236.0671, 33.3028}, // δ CrB - ε CrB
        },
        {
            {"Alphecca", {233.6721, 26.7147}},
        }
    }},
    {"Hydra", {
        "Hydra", "Hya", 140.0, -15.0,
        {
            {141.8967, -8.6586, 139.2125, -12.3536}, // Alphard - ι Hya
            {139.2125, -12.3536, 131.1742, -14.8472}, // ι Hya - θ Hya
            {131.1742, -14.8472, 127.5667, -6.4189}, // θ Hya - ζ Hya
            {127.5667, -6.4189, 122.3833, -2.9833},  // ζ Hya - ε Hya
            {122.3833, -2.9833, 129.4125, -5.9458},  // ε Hya - δ Hya
        },
        {
            {"Alphard", {141.8967, -8.6586}},
        }
    }},
    {"Corvus", {
        "Corvus", "Crv", 187.0, -18.0,
        {
            {183.9517, -17.5419, 188.5967, -23.3967}, // Gienah - δ Crv
            {188.5967, -23.3967, 187.4658, -16.5158}, // δ Crv - Algorab
            {187.4658, -16.5158, 182.1033, -22.6197}, // Algorab - β Crv
            {182.1033, -22.6197, 183.9517, -17.5419}, // β Crv - Gienah
        },
        {
            {"Gienah", {183.9517, -17.5419}},
            {"Algorab", {187.4658, -16.5158}},
        }
    }},
    {"Crater", {
        "Crater", "Crt", 170.0, -15.0,
        {
            {164.9433, -18.2989, 170.1533, -14.7781}, // α Crt - β Crt
            {170.1533, -14.7781, 176.1900, -17.6839}, // β Crt - γ Crt
            {176.1900, -17.6839, 173.6867, -22.8258}, // γ Crt - δ Crt
            {173.6867, -22.8258, 164.9433, -18.2989}, // δ Crt - α Crt
        },
        {
            {"Alkes", {164.9433, -18.2989}},
        }
    }},
    
    // ========== COSTELLAZIONI ESTIVE ==========
    {"Cygnus", {
        "Cygnus", "Cyg", 310.0, 42.0,
        {
            {310.3580, 45.2803, 305.5571, 40.2567}, // Deneb - Sadr
            {305.5571, 40.2567, 292.6803, 27.9597}, // Sadr - Albireo
            {305.5571, 40.2567, 311.5528, 33.9703}, // Sadr - Gienah (ε Cyg)
            {305.5571, 40.2567, 296.2437, 45.1308}, // Sadr - δ Cyg
        },
        {
            {"Deneb", {310.3580, 45.2803}},
            {"Sadr", {305.5571, 40.2567}},
            {"Albireo", {292.6803, 27.9597}},
        }
    }},
    {"Lyra", {
        "Lyra", "Lyr", 284.0, 38.0,
        {
            {279.2342, 38.7837, 281.0854, 39.6700}, // Vega - ε¹ Lyr
            {279.2342, 38.7837, 282.5200, 33.3628}, // Vega - ζ Lyr
            {282.5200, 33.3628, 284.7358, 32.6894}, // ζ Lyr - Sheliak
            {284.7358, 32.6894, 286.3533, 33.3633}, // Sheliak - γ Lyr (Sulafat)
            {286.3533, 33.3633, 282.5200, 33.3628}, // Sulafat - ζ Lyr
        },
        {
            {"Vega", {279.2342, 38.7837}},
            {"Sheliak", {284.7358, 32.6894}},
            {"Sulafat", {286.3533, 33.3633}},
        }
    }},
    {"Aquila", {
        "Aquila", "Aql", 297.0, 5.0,
        {
            {297.6958, 8.8683, 291.3750, 3.1147},   // Altair - Tarazed
            {297.6958, 8.8683, 306.4117, 10.6133},  // Altair - θ Aql
            {297.6958, 8.8683, 286.5625, 13.8633},  // Altair - δ Aql
            {286.5625, 13.8633, 291.3750, 3.1147},  // δ Aql - Tarazed
        },
        {
            {"Altair", {297.6958, 8.8683}},
            {"Tarazed", {291.3750, 3.1147}},
        }
    }},
    {"Sagitta", {
        "Sagitta", "Sge", 295.0, 19.0,
        {
            {295.0242, 17.4761, 296.5646, 18.0139}, // γ Sge - δ Sge
            {296.5646, 18.0139, 299.6896, 18.5342}, // δ Sge - α Sge
            {296.5646, 18.0139, 295.7271, 19.9911}, // δ Sge - β Sge
        },
        {
            {"Sham", {295.0242, 17.4761}},
        }
    }},
    {"Vulpecula", {
        "Vulpecula", "Vul", 300.0, 25.0,
        {
            {295.9708, 27.0931, 300.1458, 24.6650}, // α Vul - 13 Vul
        },
        {
            {"Anser", {295.9708, 27.0931}},
        }
    }},
    {"Delphinus", {
        "Delphinus", "Del", 310.0, 12.0,
        {
            {308.3033, 11.3031, 309.3871, 14.5956}, // Sualocin - Rotanev
            {309.3871, 14.5956, 310.8650, 15.9125}, // Rotanev - γ Del
            {310.8650, 15.9125, 309.9100, 15.0747}, // γ Del - δ Del
            {309.9100, 15.0747, 308.3033, 11.3031}, // δ Del - Sualocin
        },
        {
            {"Sualocin", {308.3033, 11.3031}},
            {"Rotanev", {309.3871, 14.5956}},
        }
    }},
    {"Hercules", {
        "Hercules", "Her", 260.0, 35.0,
        {
            {247.5550, 21.4897, 254.0008, 14.3903}, // Rasalgethi - ζ Her
            {254.0008, 14.3903, 255.0721, 21.5897}, // ζ Her - η Her
            {255.0721, 21.5897, 247.5550, 21.4897}, // η Her - Rasalgethi
            {255.0721, 21.5897, 256.1858, 30.9264}, // η Her - Kornephoros
            {256.1858, 30.9264, 259.1533, 37.2506}, // Kornephoros - γ Her
            {259.1533, 37.2506, 262.6850, 31.6028}, // γ Her - π Her
            {262.6850, 31.6028, 256.1858, 30.9264}, // π Her - Kornephoros (Keystone)
            {259.1533, 37.2506, 271.8858, 35.5036}, // γ Her - ι Her
        },
        {
            {"Rasalgethi", {247.5550, 21.4897}},
            {"Kornephoros", {256.1858, 30.9264}},
        }
    }},
    {"Ophiuchus", {
        "Ophiuchus", "Oph", 260.0, -5.0,
        {
            {263.7338, 12.5603, 265.8679, 4.5669},  // Rasalhague - κ Oph
            {265.8679, 4.5669, 257.5946, -15.7250}, // κ Oph - η Oph
            {257.5946, -15.7250, 265.0854, -29.8672}, // η Oph - θ Oph
            {263.7338, 12.5603, 247.5550, 21.4897}, // Rasalhague - Rasalgethi (Her)
        },
        {
            {"Rasalhague", {263.7338, 12.5603}},
        }
    }},
    {"Scorpius", {
        "Scorpius", "Sco", 255.0, -30.0,
        {
            {241.3593, -19.8054, 240.0833, -22.6217}, // β Sco - Dschubba
            {240.0833, -22.6217, 239.7130, -26.1140}, // Dschubba - π Sco
            {239.7130, -26.1140, 247.3519, -26.4320}, // π Sco - Antares
            {247.3519, -26.4320, 248.9706, -28.2160}, // Antares - τ Sco
            {248.9706, -28.2160, 252.5409, -34.2932}, // τ Sco - ε Sco
            {252.5409, -34.2932, 252.9677, -38.0476}, // ε Sco - μ¹ Sco
            {252.9677, -38.0476, 253.4987, -42.3617}, // μ¹ Sco - ζ Sco
            {253.4987, -42.3617, 258.0384, -43.2385}, // ζ Sco - η Sco
            {258.0384, -43.2385, 264.3297, -42.9978}, // η Sco - Sargas
            {264.3297, -42.9978, 265.6220, -39.0299}, // Sargas - κ Sco
            {265.6220, -39.0299, 263.4022, -37.1038}, // κ Sco - Shaula
            {263.4022, -37.1038, 262.6910, -37.2958}, // Shaula - Lesath
        },
        {
            {"Antares", {247.3519, -26.4320}},
            {"Shaula", {263.4022, -37.1038}},
            {"Sargas", {264.3297, -42.9978}},
            {"Dschubba", {240.0833, -22.6217}},
            {"Lesath", {262.6910, -37.2958}},
        }
    }},
    {"Sagittarius", {
        "Sagittarius", "Sgr", 285.0, -30.0,
        {
            // Teapot
            {276.0429, -34.3844, 283.8163, -26.2967}, // Kaus Australis - Kaus Media
            {283.8163, -26.2967, 287.4408, -29.8281}, // Kaus Media - Kaus Borealis
            {287.4408, -29.8281, 284.4328, -36.7614}, // Kaus Borealis - Nunki
            {284.4328, -36.7614, 276.0429, -34.3844}, // Nunki - Kaus Australis
            {283.8163, -26.2967, 290.6592, -23.9628}, // Kaus Media - Ascella
            {290.6592, -23.9628, 287.4408, -29.8281}, // Ascella - Kaus Borealis
            {284.4328, -36.7614, 290.4179, -40.6161}, // Nunki - τ Sgr
        },
        {
            {"Kaus Australis", {276.0429, -34.3844}},
            {"Nunki", {284.4328, -36.7614}},
            {"Ascella", {290.6592, -23.9628}},
            {"Kaus Media", {283.8163, -26.2967}},
            {"Kaus Borealis", {287.4408, -29.8281}},
        }
    }},
    
    // ========== COSTELLAZIONI AUTUNNALI ==========
    {"Pegasus", {
        "Pegasus", "Peg", 340.0, 20.0,
        {
            // Great Square
            {326.0467, 9.8750, 346.1900, 15.2050},   // Markab - Scheat
            {346.1900, 15.2050, 2.0963, 29.0906},    // Scheat - Alpheratz (And)
            {2.0963, 29.0906, 340.3658, 28.0825},    // Alpheratz - Algenib
            {340.3658, 28.0825, 326.0467, 9.8750},   // Algenib - Markab
            {346.1900, 15.2050, 332.5500, 6.1978},   // Scheat - ε Peg (Enif)
        },
        {
            {"Markab", {326.0467, 9.8750}},
            {"Scheat", {346.1900, 15.2050}},
            {"Algenib", {340.3658, 28.0825}},
            {"Enif", {332.5500, 6.1978}},
        }
    }},
    {"Andromeda", {
        "Andromeda", "And", 10.0, 38.0,
        {
            {2.0963, 29.0906, 9.8321, 30.8614},     // Alpheratz - δ And
            {9.8321, 30.8614, 17.4330, 35.6206},    // δ And - Mirach
            {17.4330, 35.6206, 30.9750, 42.3297},   // Mirach - Almach
        },
        {
            {"Alpheratz", {2.0963, 29.0906}},
            {"Mirach", {17.4330, 35.6206}},
            {"Almach", {30.9750, 42.3297}},
        }
    }},
    {"Cassiopeia", {
        "Cassiopeia", "Cas", 15.0, 60.0,
        {
            {2.2940, 59.1498, 10.1268, 56.5372},   // Caph - Schedar
            {10.1268, 56.5372, 14.1772, 60.7167},  // Schedar - Navi
            {14.1772, 60.7167, 21.4539, 60.2353},  // Navi - Ruchbah
            {21.4539, 60.2353, 28.5990, 63.6701},  // Ruchbah - Segin
        },
        {
            {"Schedar", {10.1268, 56.5372}},
            {"Caph", {2.2940, 59.1498}},
            {"Navi", {14.1772, 60.7167}},
            {"Ruchbah", {21.4539, 60.2353}},
            {"Segin", {28.5990, 63.6701}},
        }
    }},
    {"Perseus", {
        "Perseus", "Per", 50.0, 42.0,
        {
            {51.0808, 49.8611, 47.0421, 40.9556},  // Mirfak - δ Per
            {47.0421, 40.9556, 40.9554, 36.1467},  // δ Per - ε Per
            {40.9554, 36.1467, 46.1992, 38.8403},  // ε Per - Algol
            {51.0808, 49.8611, 55.7312, 47.7875},  // Mirfak - γ Per
            {55.7312, 47.7875, 59.4633, 40.0103},  // γ Per - ψ Per
            {47.0421, 40.9556, 46.1992, 38.8403},  // δ Per - Algol
        },
        {
            {"Mirfak", {51.0808, 49.8611}},
            {"Algol", {46.1992, 38.8403}},
        }
    }},
    {"Triangulum", {
        "Triangulum", "Tri", 26.0, 32.0,
        {
            {28.2704, 29.5786, 25.3579, 35.0508},  // β Tri - α Tri
            {25.3579, 35.0508, 31.1296, 33.8472},  // α Tri - γ Tri
            {31.1296, 33.8472, 28.2704, 29.5786},  // γ Tri - β Tri
        },
        {
            {"Mothallah", {28.2704, 29.5786}},
        }
    }},
    {"Aries", {
        "Aries", "Ari", 32.0, 22.0,
        {
            {31.7933, 23.4622, 28.6604, 20.8081},  // Hamal - Sheratan
            {28.6604, 20.8081, 29.2467, 19.7264},  // Sheratan - Mesarthim
        },
        {
            {"Hamal", {31.7933, 23.4622}},
            {"Sheratan", {28.6604, 20.8081}},
            {"Mesarthim", {29.2467, 19.7264}},
        }
    }},
    {"Pisces", {
        "Pisces", "Psc", 10.0, 10.0,
        {
            {2.0342, 2.7639, 359.8283, 6.8636},    // η Psc - ο Psc
            {359.8283, 6.8636, 351.7333, 7.5853},  // ο Psc - α Psc (Alrescha)
            {351.7333, 7.5853, 345.9679, 3.8208},  // Alrescha - ν Psc
        },
        {
            {"Alrescha", {351.7333, 7.5853}},
        }
    }},
    {"Cetus", {
        "Cetus", "Cet", 30.0, -10.0,
        {
            {43.5646, 4.0897, 40.8258, 3.2358},    // Menkar - γ Cet
            {40.8258, 3.2358, 26.0212, -2.9775},   // γ Cet - Mira
            {26.0212, -2.9775, 10.8967, -17.9867}, // Mira - Deneb Kaitos
            {10.8967, -17.9867, 21.0063, -8.1828}, // Deneb Kaitos - ι Cet
            {43.5646, 4.0897, 44.5650, -8.8239},   // Menkar - λ Cet
        },
        {
            {"Menkar", {43.5646, 4.0897}},
            {"Mira", {26.0212, -2.9775}},
            {"Deneb Kaitos", {10.8967, -17.9867}},
        }
    }},
    {"Aquarius", {
        "Aquarius", "Aqr", 335.0, -12.0,
        {
            {331.4458, -0.3197, 334.2079, -7.7833}, // Sadalsuud - Sadalmelik
            {334.2079, -7.7833, 340.6633, -12.5397}, // Sadalmelik - ζ Aqr
            {340.6633, -12.5397, 343.0508, -7.7969}, // ζ Aqr - η Aqr
            {343.0508, -7.7969, 343.6542, -13.5925}, // η Aqr - Skat
        },
        {
            {"Sadalsuud", {331.4458, -0.3197}},
            {"Sadalmelik", {334.2079, -7.7833}},
            {"Skat", {343.6542, -13.5925}},
        }
    }},
    {"Capricornus", {
        "Capricornus", "Cap", 315.0, -18.0,
        {
            {305.2529, -14.7814, 311.5242, -12.5083}, // Algedi - Dabih
            {311.5242, -12.5083, 320.5608, -14.6614}, // Dabih - ψ Cap
            {320.5608, -14.6614, 326.7600, -16.6622}, // ψ Cap - ω Cap
            {326.7600, -16.6622, 325.0229, -16.1264}, // ω Cap - Deneb Algedi
            {325.0229, -16.1264, 320.5608, -14.6614}, // Deneb Algedi - ψ Cap
        },
        {
            {"Algedi", {305.2529, -14.7814}},
            {"Dabih", {311.5242, -12.5083}},
            {"Deneb Algedi", {325.0229, -16.1264}},
        }
    }},
    
    // ========== COSTELLAZIONI CIRCUMPOLARI NORD ==========
    {"Ursa Major", {
        "Ursa Major", "UMa", 180.0, 55.0,
        {
            {165.4600, 61.7510, 165.4603, 56.3824}, // Dubhe - Merak
            {165.4603, 56.3824, 178.4575, 53.6948}, // Merak - Phecda
            {178.4575, 53.6948, 183.8565, 57.0326}, // Phecda - Megrez
            {183.8565, 57.0326, 193.5068, 55.9598}, // Megrez - Alioth
            {193.5068, 55.9598, 200.9814, 54.9254}, // Alioth - Mizar
            {200.9814, 54.9254, 206.8852, 49.3133}, // Mizar - Alkaid
            {165.4600, 61.7510, 183.8565, 57.0326}, // Dubhe - Megrez (chiude il box)
        },
        {
            {"Dubhe", {165.4600, 61.7510}},
            {"Merak", {165.4603, 56.3824}},
            {"Phecda", {178.4575, 53.6948}},
            {"Megrez", {183.8565, 57.0326}},
            {"Alioth", {193.5068, 55.9598}},
            {"Mizar", {200.9814, 54.9254}},
            {"Alkaid", {206.8852, 49.3133}},
        }
    }},
    {"Ursa Minor", {
        "Ursa Minor", "UMi", 230.0, 80.0,
        {
            {37.9546, 89.2641, 263.0542, 86.5864},  // Polaris - δ UMi
            {263.0542, 86.5864, 236.0146, 83.0297}, // δ UMi - ε UMi
            {236.0146, 83.0297, 238.1829, 77.7944}, // ε UMi - ζ UMi
            {238.1829, 77.7944, 222.6763, 74.1554}, // ζ UMi - Kochab
            {222.6763, 74.1554, 231.2325, 71.8340}, // Kochab - Pherkad
            {222.6763, 74.1554, 236.0146, 83.0297}, // Kochab - ε UMi
        },
        {
            {"Polaris", {37.9546, 89.2641}},
            {"Kochab", {222.6763, 74.1554}},
            {"Pherkad", {231.2325, 71.8340}},
        }
    }},
    {"Draco", {
        "Draco", "Dra", 270.0, 65.0,
        {
            {269.1517, 51.4889, 262.6083, 52.3014}, // Eltanin - Rastaban
            {262.6083, 52.3014, 257.1967, 55.1731}, // Rastaban - ξ Dra
            {257.1967, 55.1731, 245.9979, 61.5142}, // ξ Dra - δ Dra
            {245.9979, 61.5142, 231.2325, 69.3311}, // δ Dra - χ Dra
            {231.2325, 69.3311, 211.0967, 69.2028}, // χ Dra - ψ Dra
            {211.0967, 69.2028, 175.9396, 69.3311}, // ψ Dra - ζ Dra
            {175.9396, 69.3311, 188.3708, 75.7556}, // ζ Dra - η Dra
            {188.3708, 75.7556, 231.0954, 72.7336}, // η Dra - θ Dra
            {269.1517, 51.4889, 275.4658, 57.0458}, // Eltanin - Grumium
        },
        {
            {"Eltanin", {269.1517, 51.4889}},
            {"Rastaban", {262.6083, 52.3014}},
            {"Thuban", {211.0971, 64.3756}},
        }
    }},
    {"Cepheus", {
        "Cepheus", "Cep", 330.0, 65.0,
        {
            {319.6450, 62.5856, 327.7529, 58.2011}, // Alderamin - ζ Cep
            {327.7529, 58.2011, 332.2783, 66.2006}, // ζ Cep - ε Cep
            {332.2783, 66.2006, 328.9833, 77.6322}, // ε Cep - Errai
            {328.9833, 77.6322, 316.4771, 70.5608}, // Errai - Alfirk
            {316.4771, 70.5608, 319.6450, 62.5856}, // Alfirk - Alderamin
        },
        {
            {"Alderamin", {319.6450, 62.5856}},
            {"Errai", {328.9833, 77.6322}},
            {"Alfirk", {316.4771, 70.5608}},
        }
    }},
    
    // ========== COSTELLAZIONI ZODIACALI MANCANTI ==========
    {"Cancer", {
        "Cancer", "Cnc", 130.0, 18.0,
        {
            {130.8213, 28.7600, 131.1713, 21.4686}, // ι Cnc - γ Cnc
            {131.1713, 21.4686, 134.6217, 18.1542}, // γ Cnc - Acubens
            {131.1713, 21.4686, 130.1146, 11.8578}, // γ Cnc - δ Cnc
        },
        {
            {"Acubens", {134.6217, 18.1542}},
        }
    }},
    {"Libra", {
        "Libra", "Lib", 230.0, -16.0,
        {
            {222.7196, -16.0419, 229.2517, -9.3828},  // Zubenelgenubi - Zubeneschamali
            {229.2517, -9.3828, 226.0175, -25.2819},  // Zubeneschamali - σ Lib
            {226.0175, -25.2819, 222.7196, -16.0419}, // σ Lib - Zubenelgenubi
        },
        {
            {"Zubenelgenubi", {222.7196, -16.0419}},
            {"Zubeneschamali", {229.2517, -9.3828}},
        }
    }},
    
    // ========== COSTELLAZIONI DELL'EMISFERO SUD ==========
    {"Crux", {
        "Crux", "Cru", 186.5, -60.0,
        {
            // Croce del Sud - 4 stelle principali formano una croce
            // Braccio verticale (nord-sud): Gacrux (γ) → Acrux (α)
            {187.7917, -57.1131, 186.6496, -63.0990},  // Gacrux - Acrux
            // Braccio orizzontale (est-ovest): δ Cru → Mimosa (β)
            {183.7863, -58.7489, 191.9304, -59.6882},  // δ Cru - Mimosa
        },
        {
            {"Acrux", {186.6496, -63.0990}},      // α Cru, mag 0.77
            {"Mimosa", {191.9304, -59.6882}},     // β Cru, mag 1.25
            {"Gacrux", {187.7917, -57.1131}},     // γ Cru, mag 1.59
            {"Imai", {183.7863, -58.7489}},       // δ Cru, mag 2.79
        }
    }},
    {"Centaurus", {
        "Centaurus", "Cen", 205.0, -45.0,
        {
            {219.9021, -60.8353, 211.6708, -36.3700}, // α Cen - β Cen (Hadar)
            {211.6708, -36.3700, 200.1492, -36.7122}, // Hadar - ε Cen
            {200.1492, -36.7122, 190.3792, -48.9597}, // ε Cen - γ Cen
        },
        {
            {"Rigil Kentaurus", {219.9021, -60.8353}},
            {"Hadar", {211.6708, -36.3700}},
        }
    }},
    {"Carina", {
        "Carina", "Car", 130.0, -60.0,
        {
            {95.9879, -52.6958, 138.2996, -69.7172}, // Canopus - Miaplacidus
            {138.2996, -69.7172, 125.6283, -59.5097}, // Miaplacidus - Avior
            {125.6283, -59.5097, 95.9879, -52.6958},  // Avior - Canopus
        },
        {
            {"Canopus", {95.9879, -52.6958}},
            {"Miaplacidus", {138.2996, -69.7172}},
            {"Avior", {125.6283, -59.5097}},
        }
    }},
    {"Vela", {
        "Vela", "Vel", 140.0, -48.0,
        {
            {136.9988, -47.3367, 131.1758, -54.7086}, // γ Vel (Regor) - δ Vel
            {131.1758, -54.7086, 122.3830, -47.3366}, // δ Vel - κ Vel
            {122.3830, -47.3366, 136.9988, -47.3367}, // κ Vel - γ Vel
        },
        {
            {"Regor", {136.9988, -47.3367}},
        }
    }},
    {"Puppis", {
        "Puppis", "Pup", 120.0, -35.0,
        {
            {121.8858, -40.0033, 120.8960, -24.3043}, // ζ Pup (Naos) - ρ Pup
            {120.8960, -24.3043, 110.0275, -26.7678}, // ρ Pup - ν Pup
        },
        {
            {"Naos", {121.8858, -40.0033}},
        }
    }},
    {"Piscis Austrinus", {
        "Piscis Austrinus", "PsA", 340.0, -32.0,
        {
            {344.4127, -29.6222, 340.1637, -32.5397}, // Fomalhaut - δ PsA
            {340.1637, -32.5397, 332.5587, -32.3475}, // δ PsA - γ PsA
        },
        {
            {"Fomalhaut", {344.4127, -29.6222}},
        }
    }},
    {"Grus", {
        "Grus", "Gru", 335.0, -45.0,
        {
            {332.0583, -46.8847, 340.6671, -46.8846}, // Alnair - β Gru
            {340.6671, -46.8846, 341.6867, -37.3650}, // β Gru - Al Dhanab
        },
        {
            {"Alnair", {332.0583, -46.8847}},
            {"Al Dhanab", {341.6867, -37.3650}},
        }
    }},
    {"Phoenix", {
        "Phoenix", "Phe", 20.0, -45.0,
        {
            {6.5708, -42.3061, 17.4363, -43.3178},  // Ankaa - β Phe
            {17.4363, -43.3178, 26.0167, -45.7467}, // β Phe - γ Phe
        },
        {
            {"Ankaa", {6.5708, -42.3061}},
        }
    }},
    {"Columba", {
        "Columba", "Col", 85.0, -35.0,
        {
            {84.9121, -34.0742, 86.6296, -35.2833},  // Phact - Wazn
            {86.6296, -35.2833, 91.8817, -33.7986},  // Wazn - δ Col
        },
        {
            {"Phact", {84.9121, -34.0742}},
            {"Wazn", {86.6296, -35.2833}},
        }
    }},
    
    // ========== ALTRE COSTELLAZIONI IMPORTANTI ==========
    {"Auriga", {
        "Auriga", "Aur", 90.0, 42.0,
        {
            {79.1723, 45.9980, 89.8822, 44.9474},   // Capella - Menkalinan
            {89.8822, 44.9474, 90.9786, 37.2125},   // Menkalinan - θ Aur
            {90.9786, 37.2125, 74.2484, 33.1661},   // θ Aur - Elnath (shared Tau)
            {74.2484, 33.1661, 75.6197, 41.0757},   // Elnath - ε Aur
            {75.6197, 41.0757, 79.1723, 45.9980},   // ε Aur - Capella
        },
        {
            {"Capella", {79.1723, 45.9980}},
            {"Menkalinan", {89.8822, 44.9474}},
        }
    }},
    {"Serpens", {
        "Serpens", "Ser", 240.0, 10.0,
        {
            // Serpens Caput (testa)
            {236.0667, 6.4264, 239.1133, 15.6617},  // α Ser - β Ser
            {239.1133, 15.6617, 237.1850, 18.1414}, // β Ser - γ Ser
        },
        {
            {"Unukalhai", {236.0667, 6.4264}},
        }
    }},
    {"Scutum", {
        "Scutum", "Sct", 280.0, -10.0,
        {
            {280.7596, -8.2442, 279.5846, -4.8614},  // α Sct - β Sct
            {279.5846, -4.8614, 281.7933, -9.0500},  // β Sct - δ Sct
        },
        {}
    }},
    {"Corona Australis", {
        "Corona Australis", "CrA", 285.0, -40.0,
        {
            {287.5075, -37.9042, 287.3679, -40.4967}, // α CrA - β CrA
            {287.3679, -40.4967, 285.4558, -42.3125}, // β CrA - γ CrA
        },
        {}
    }},
    {"Lupus", {
        "Lupus", "Lup", 232.0, -42.0,
        {
            {220.4821, -47.3878, 230.6700, -36.2614}, // α Lup - β Lup
            {230.6700, -36.2614, 233.7854, -41.1667}, // β Lup - γ Lup
        },
        {}
    }},
    {"Ara", {
        "Ara", "Ara", 262.0, -55.0,
        {
            {262.7742, -49.8761, 265.4667, -55.5292}, // β Ara - α Ara
            {265.4667, -55.5292, 254.6550, -59.0417}, // α Ara - γ Ara
        },
        {}
    }},
};

// ============================================================================
// CONFINI DELLE COSTELLAZIONI (segmenti IAU semplificati)
// Coordinate J2000.0 - segmenti principali per ogni costellazione
// ============================================================================

const std::vector<ConstellationBoundary> CONSTELLATION_BOUNDARIES = {
    // Orion
    {"Ori", {{69.25, 0.0, 69.25, 10.0}, {69.25, 10.0, 83.75, 10.0}, 
             {83.75, 10.0, 83.75, 22.83}, {83.75, 22.83, 93.0, 22.83},
             {93.0, 22.83, 93.0, 15.0}, {93.0, 15.0, 93.0, 0.0},
             {93.0, 0.0, 93.0, -11.0}, {93.0, -11.0, 69.25, -11.0},
             {69.25, -11.0, 69.25, 0.0}}},
    // Leo
    {"Leo", {{138.0, 6.0, 138.0, 33.0}, {138.0, 33.0, 180.0, 33.0},
             {180.0, 33.0, 180.0, 6.0}, {180.0, 6.0, 138.0, 6.0}}},
    // Taurus
    {"Tau", {{51.0, 0.0, 51.0, 31.0}, {51.0, 31.0, 90.0, 31.0},
             {90.0, 31.0, 90.0, 0.0}, {90.0, 0.0, 51.0, 0.0}}},
    // Gemini
    {"Gem", {{90.0, 10.0, 90.0, 35.0}, {90.0, 35.0, 120.0, 35.0},
             {120.0, 35.0, 120.0, 10.0}, {120.0, 10.0, 90.0, 10.0}}},
    // Canis Major
    {"CMa", {{90.0, -11.0, 90.0, -33.0}, {90.0, -33.0, 116.0, -33.0},
             {116.0, -33.0, 116.0, -11.0}, {116.0, -11.0, 90.0, -11.0}}},
    // Cygnus
    {"Cyg", {{285.0, 27.5, 285.0, 61.0}, {285.0, 61.0, 330.0, 61.0},
             {330.0, 61.0, 330.0, 27.5}, {330.0, 27.5, 285.0, 27.5}}},
    // Lyra
    {"Lyr", {{273.0, 25.5, 273.0, 47.5}, {273.0, 47.5, 295.0, 47.5},
             {295.0, 47.5, 295.0, 25.5}, {295.0, 25.5, 273.0, 25.5}}},
    // Aquila
    {"Aql", {{280.0, -12.0, 280.0, 18.5}, {280.0, 18.5, 310.0, 18.5},
             {310.0, 18.5, 310.0, -12.0}, {310.0, -12.0, 280.0, -12.0}}},
    // Scorpius
    {"Sco", {{225.0, -20.0, 225.0, -45.0}, {225.0, -45.0, 270.0, -45.0},
             {270.0, -45.0, 270.0, -20.0}, {270.0, -20.0, 225.0, -20.0}}},
    // Sagittarius
    {"Sgr", {{270.0, -12.0, 270.0, -45.0}, {270.0, -45.0, 308.0, -45.0},
             {308.0, -45.0, 308.0, -12.0}, {308.0, -12.0, 270.0, -12.0}}},
    // Ursa Major
    {"UMa", {{120.0, 28.0, 120.0, 73.0}, {120.0, 73.0, 210.0, 73.0},
             {210.0, 73.0, 210.0, 28.0}, {210.0, 28.0, 120.0, 28.0}}},
    // Cassiopeia
    {"Cas", {{345.0, 46.0, 345.0, 77.0}, {345.0, 77.0, 52.0, 77.0},
             {52.0, 77.0, 52.0, 46.0}, {52.0, 46.0, 345.0, 46.0}}},
    // Perseus
    {"Per", {{34.5, 31.0, 34.5, 59.0}, {34.5, 59.0, 69.0, 59.0},
             {69.0, 59.0, 69.0, 31.0}, {69.0, 31.0, 34.5, 31.0}}},
    // Andromeda
    {"And", {{350.0, 21.0, 350.0, 53.0}, {350.0, 53.0, 40.0, 53.0},
             {40.0, 53.0, 40.0, 21.0}, {40.0, 21.0, 350.0, 21.0}}},
    // Pegasus
    {"Peg", {{320.0, 2.0, 320.0, 36.0}, {320.0, 36.0, 360.0, 36.0},
             {360.0, 36.0, 360.0, 2.0}, {360.0, 2.0, 320.0, 2.0}}},
    // Virgo
    {"Vir", {{172.0, -22.0, 172.0, 14.0}, {172.0, 14.0, 225.0, 14.0},
             {225.0, 14.0, 225.0, -22.0}, {225.0, -22.0, 172.0, -22.0}}},
    // Boötes
    {"Boo", {{200.0, 7.0, 200.0, 55.0}, {200.0, 55.0, 233.0, 55.0},
             {233.0, 55.0, 233.0, 7.0}, {233.0, 7.0, 200.0, 7.0}}},
    // Hercules
    {"Her", {{230.0, 4.0, 230.0, 51.0}, {230.0, 51.0, 285.0, 51.0},
             {285.0, 51.0, 285.0, 4.0}, {285.0, 4.0, 230.0, 4.0}}},
    // Auriga
    {"Aur", {{67.5, 28.0, 67.5, 56.0}, {67.5, 56.0, 112.5, 56.0},
             {112.5, 56.0, 112.5, 28.0}, {112.5, 28.0, 67.5, 28.0}}},
    // Crux
    {"Cru", {{180.0, -55.0, 180.0, -65.0}, {180.0, -65.0, 195.0, -65.0},
             {195.0, -65.0, 195.0, -55.0}, {195.0, -55.0, 180.0, -55.0}}},
    // Centaurus
    {"Cen", {{172.0, -33.0, 172.0, -65.0}, {172.0, -65.0, 230.0, -65.0},
             {230.0, -65.0, 230.0, -33.0}, {230.0, -33.0, 172.0, -33.0}}},
    // Carina
    {"Car", {{90.0, -51.0, 90.0, -76.0}, {90.0, -76.0, 165.0, -76.0},
             {165.0, -76.0, 165.0, -51.0}, {165.0, -51.0, 90.0, -51.0}}},
    // Canis Minor
    {"CMi", {{105.0, 0.0, 105.0, 13.0}, {105.0, 13.0, 120.0, 13.0},
             {120.0, 13.0, 120.0, 0.0}, {120.0, 0.0, 105.0, 0.0}}},
    // Lepus
    {"Lep", {{69.0, -11.0, 69.0, -27.0}, {69.0, -27.0, 93.0, -27.0},
             {93.0, -27.0, 93.0, -11.0}, {93.0, -11.0, 69.0, -11.0}}},
    // Eridanus
    {"Eri", {{15.0, -58.0, 15.0, -1.0}, {15.0, -1.0, 78.0, -1.0},
             {78.0, -1.0, 78.0, -58.0}, {78.0, -58.0, 15.0, -58.0}}},
};

// Funzione per ottenere i confini di una costellazione
std::vector<ConstellationLine> getConstellationBoundaryLines(const std::string& abbr) {
    for (const auto& boundary : CONSTELLATION_BOUNDARIES) {
        if (boundary.abbreviation == abbr) {
            return boundary.segments;
        }
    }
    return {};
}

} // namespace map
} // namespace starmap
